---
/**
 * VISUAL GALLERY - ASTRO VERSION (SEO Optimized)
 * Strategi: Full Static Discovery untuk Bukti Operasional & Kualitas.
 */
import { Truck, PackageCheck, ShieldCheck, ChevronRight } from 'lucide-react';
import productsData from '@/data/products.json';

/**
 * FUNGSI OPTIMASI GAMBAR (Server-side Build)
 */
const getOptimizedUrl = (url = '', width: number, height?: number) => {
  if (!url || typeof url !== 'string') return '';
  if (url.includes('cloudinary.com')) {
    const params = `f_auto,q_auto:eco,c_fill,g_auto,w_${width}${height ? `,h_${height}` : ''}`;
    return url.replace('/upload/', `/upload/${params}/`);
  }
  return url;
};

// Data Visual dari JSON
const IMG_LAHAN = productsData[0]?.image || ''; 
const IMG_PACKING = productsData[5]?.image || ''; 
const PRODUCT_NAME_LAHAN = productsData[0]?.name || 'Cipanas Highland';
const PRODUCT_NAME_PACKING = productsData[5]?.name || 'Sayuran';

const regions = ["Jakarta", "Tangerang", "Bekasi", "Bogor/Depok"];
---

<section id="lahan" class="py-12 lg:py-20 bg-white font-sans overflow-hidden border-b-2 border-green-100 text-left reveal-container">
  <div class="max-w-[1800px] mx-auto px-6 md:px-12 lg:px-20">
    
    <div class="grid lg:grid-cols-12 gap-10 items-end mb-16">
      <div class="lg:col-span-8 space-y-4">
        <div class="flex items-center gap-3 reveal-left">
          <ShieldCheck size={16} class="text-[#15803d]" />
          <span class="text-[10px] font-black uppercase tracking-[0.4em] text-[#15803d]">Farm to Distribution</span>
        </div>
        <h2 class="text-4xl lg:text-7xl font-serif italic font-black text-[#052c17] leading-[0.9] tracking-tighter uppercase reveal-up">
          Kualitas <span class="text-[#15803d] not-italic font-sans">Tanpa Kompromi.</span>
        </h2>
      </div>
      <div class="lg:col-span-4 border-l-4 border-green-500/20 pl-8 reveal-right">
        <p class="text-slate-600 font-bold text-sm lg:text-lg leading-relaxed italic">
          "Kami mengelola integritas suplai dari hulu hingga hilir untuk menjaga standar bisnis Anda."
        </p>
      </div>
    </div>

    <div class="grid lg:grid-cols-12 gap-8 lg:gap-12">
      
      <div class="lg:col-span-7 space-y-6 reveal-up">
        <div class="relative aspect-[16/10] rounded-[2.5rem] lg:rounded-[3.5rem] overflow-hidden border-2 border-green-100 shadow-2xl group bg-slate-50">
          <img 
            src={getOptimizedUrl(IMG_LAHAN, 1200, 750)} 
            class="w-full h-full object-cover grayscale-[0.2] group-hover:grayscale-0 transition-all duration-1000 group-hover:scale-105" 
            alt={`Budidaya ${PRODUCT_NAME_LAHAN} Premium Cipanas`}
            loading="lazy"
            decoding="async"
          />
          <div class="absolute inset-0 bg-gradient-to-t from-green-900/40 via-transparent to-transparent opacity-60" aria-hidden="true"></div>
          
          <div class="absolute bottom-8 left-8 bg-white/10 backdrop-blur-md border border-white/20 p-4 rounded-2xl">
            <p class="text-white text-[10px] font-black uppercase tracking-widest leading-none mb-1">Featured Origin</p>
            <p class="text-white font-serif italic text-lg">{PRODUCT_NAME_LAHAN}</p>
          </div>
        </div>
        <div class="px-6">
          <p class="text-[#15803d] text-[10px] font-black uppercase tracking-[0.4em] mb-2">Hulu Produksi</p>
          <h4 class="text-2xl font-serif italic font-black text-[#052c17] mb-2">Highland cultivation.</h4>
          <p class="text-slate-700 text-sm lg:text-base font-semibold max-w-xl">
            Lahan subur Cipanas yang dikelola dengan standar GAP (Good Agricultural Practices) untuk menghasilkan komoditas seperti {PRODUCT_NAME_LAHAN} dan lainnya.
          </p>
        </div>
      </div>

      <div class="lg:col-span-5 space-y-12 lg:space-y-16">
        
        <div class="flex flex-col md:flex-row gap-8 items-center reveal-up" style="transition-delay: 0.2s;">
          <div class="w-full md:w-1/2 aspect-square rounded-[2rem] overflow-hidden border-2 border-green-100 shadow-xl relative group bg-slate-50">
            <img 
              src={getOptimizedUrl(IMG_PACKING, 600, 600)} 
              class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" 
              alt={`Proses QC ${PRODUCT_NAME_PACKING} Green Fresh`}
              loading="lazy"
              decoding="async"
            />
            <div class="absolute top-4 right-4 bg-white/95 backdrop-blur-md p-3 rounded-xl text-[#15803d] shadow-lg">
              <PackageCheck size={20} />
            </div>
          </div>
          <div class="w-full md:w-1/2 space-y-3">
            <h5 class="text-xl font-serif italic font-black text-[#052c17]">Standardized Packaging.</h5>
            <p class="text-xs lg:text-sm text-slate-600 leading-relaxed font-bold">
              Proses pembersihan dan pengemasan higienis untuk menjaga kesegaran {PRODUCT_NAME_PACKING} hingga tiba di lokasi Anda.
            </p>
          </div>
        </div>

        <div class="bg-[#f7faf7] border-2 border-green-100 rounded-[2.5rem] p-8 lg:p-10 relative overflow-hidden group reveal-up" style="transition-delay: 0.3s;">
          <div class="absolute top-0 right-0 w-32 h-32 bg-green-100/50 rounded-full blur-3xl -mr-10 -mt-10" aria-hidden="true"></div>
          
          <div class="relative z-10 flex flex-col justify-between h-full space-y-6 text-left">
            <div class="w-12 h-12 bg-[#15803d] rounded-xl flex items-center justify-center text-white shadow-lg group-hover:translate-x-2 transition-transform">
              <Truck size={24} />
            </div>
            <div>
              <h4 class="text-2xl font-serif italic font-black text-[#052c17] mb-4">Armada Logistik Mandiri.</h4>
              <ul class="grid grid-cols-2 gap-y-3 gap-x-6 text-[10px] font-black uppercase tracking-widest text-[#14532d]">
                {regions.map(region => (
                  <li class="flex items-center gap-2"><ChevronRight size={12} class="text-[#15803d]" /> {region}</li>
                ))}
              </ul>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</section>

<style>
  /* Animasi SEO-Friendly Native CSS */
  .reveal-container .reveal-up,
  .reveal-container .reveal-left,
  .reveal-container .reveal-right {
    opacity: 0;
    transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
  }

  .reveal-up { transform: translateY(30px); }
  .reveal-left { transform: translateX(-30px); }
  .reveal-right { transform: translateX(30px); }

  :global(.is-visible) .reveal-up,
  :global(.is-visible) .reveal-left,
  :global(.is-visible) .reveal-right {
    opacity: 1;
    transform: translate(0);
  }
</style>

<script>
  /**
   * Intersection Observer ringan untuk memicu animasi visual.
   * Teks operasional tetap terbaca oleh bot karena bersifat statis dalam DOM.
   */
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('is-visible');
      }
    });
  }, { threshold: 0.1 });

  document.querySelectorAll('.reveal-container, .reveal-up').forEach(el => observer.observe(el));
</script>