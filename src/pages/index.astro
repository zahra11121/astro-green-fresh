---
/**
 * MAIN LANDING PAGE - CV GREEN FRESH CIPANAS
 * Mode: Full Astro (Zero Hydration)
 * Fokus: Branding Korporat & Skala Bisnis
 */
import MainLayout from '@/layouts/MainLayout.astro';
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';

// Import Komponen Korporat Sesuai Request
import Hero from '@/components/Hero.astro';
import WhoWeAre from '@/components/WhoWeAre.astro';
import CashFlow from '@/components/CashFlow.astro';
import EconomicImpact from '@/components/EconomicImpact.astro';
import VisualGallery from '@/components/VisualGallery.astro';

// Data untuk SEO & Internal Linking
import { jabodetabekCities } from '@/data/cities';
const title = "CV Green Fresh Cipanas | Supplier Sayur Segar Premium B2B Jabodetabek";
const description = "Partner strategis supply sayuran Grade A untuk Hotel, Restoran, dan Catering. Distribusi langsung dari petani Cipanas dengan sistem logistik 24 jam.";
---

<MainLayout title={title} description={description}>
  <div class="bg-white text-[#052c17] font-sans selection:bg-green-100 reveal-container">
    <Header />

    <main>
      <Hero />

      <section class="reveal-up">
        <WhoWeAre />
      </section>

      <section class="py-12 bg-slate-50 reveal-up">
        <div class="max-w-[1800px] mx-auto px-6">
          <div class="mb-10">
            <h2 class="text-3xl font-black uppercase tracking-tighter text-[#052c17]">Dokumentasi Operasional.</h2>
            <p class="text-slate-600 font-medium">Transparansi proses dari lahan hingga pengiriman.</p>
          </div>
          <VisualGallery />
        </div>
      </section>

      <section class="reveal-up">
        <CashFlow />
        <EconomicImpact />
      </section>

      <section class="py-20 bg-white border-t border-green-50">
        <div class="max-w-[1800px] mx-auto px-6">
          <div class="flex flex-col md:flex-row md:items-end justify-between mb-12 gap-6 reveal-up">
            <div class="space-y-2">
              <h3 class="text-xs font-black text-[#15803d] uppercase tracking-[0.4em]">Logistik & Jangkauan</h3>
              <h2 class="text-3xl lg:text-5xl font-black uppercase tracking-tighter text-[#052c17]">Wilayah Pengiriman.</h2>
            </div>
            <p class="max-w-md text-slate-600 font-medium">
              Sistem distribusi mandiri yang melayani berbagai kawasan bisnis strategis setiap hari.
            </p>
          </div>

          <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4 reveal-up">
            {jabodetabekCities.slice(0, 18).map((city) => (
              <a 
                href={`/kota/${city.slug}`} 
                class="group p-6 rounded-2xl border border-slate-100 bg-slate-50/30 hover:bg-[#052c17] hover:border-[#052c17] transition-all duration-300 text-center"
              >
                <span class="text-xs font-black uppercase tracking-wider text-[#052c17] group-hover:text-white transition-colors">
                  {city.name}
                </span>
              </a>
            ))}
          </div>
        </div>
      </section>
    </main>

    <Footer />
  </div>
</MainLayout>

<style>
  /* Animasi Anti-Blank: Teks muncul default, animasi hanya jika JS aktif */
  .reveal-up {
    opacity: 1;
    transform: translateY(0);
    transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
  }

  @media (prefers-reduced-motion: no-preference) {
    :global(.js-enabled) .reveal-up {
      opacity: 0;
      transform: translateY(30px);
    }
  }

  :global(.is-visible) .reveal-up {
    opacity: 1 !important;
    transform: translateY(0) !important;
  }
</style>

<script>
  // Memberitahu CSS bahwa JS siap
  document.documentElement.classList.add('js-enabled');

  const setupObserver = () => {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('is-visible');
        }
      });
    }, { threshold: 0.1 });

    document.querySelectorAll('.reveal-up').forEach(el => observer.observe(el));
  };

  setupObserver();
  document.addEventListener('astro:after-swap', setupObserver);
</script>