---
/**
 * MAIN LANDING PAGE - CV GREEN FRESH CIPANAS
 * Mode: Full Astro (Zero Hydration Strategis)
 * Update: Desain Rendah Kontras & Wilayah Pengiriman Aktif (Non-Flat)
 */
import MainLayout from '@/layouts/MainLayout.astro';
import Header from '@/components/Header.astro';
import Footer from '@/components/Footer.astro';

// Komponen Pendukung
import Hero from '@/components/Hero.astro';
import WhoWeAre from '@/components/WhoWeAre.astro';
import CashFlow from '@/components/CashFlow.astro';
import EconomicImpact from '@/components/EconomicImpact.astro';
import VisualGallery from '@/components/VisualGallery.astro';

// Icons & Data
import { MapPin, ChevronRight } from 'lucide-react';
import { jabodetabekCities } from '@/data/cities';

const title = "CV Green Fresh Cipanas | Supplier Sayur Segar Cipanas";
const description = "Partner strategis supply sayuran Grade A untuk Hotel, Restoran, dan Catering. Distribusi langsung dari petani Cipanas dengan sistem logistik 24 jam.";
---

<MainLayout title={title} description={description}>
  <div class="bg-[#fcfdfc] text-[#052c17] font-sans selection:bg-green-100 reveal-container">
    <Header />

    <main>
      <Hero />

      <section class="reveal-up bg-white border-b-2 border-green-50">
        <WhoWeAre />
      </section>

      <section class="py-16 md:py-24 bg-[#f8faf8] border-b-2 border-green-100 reveal-up">
        <div class="max-w-[1800px] mx-auto px-6">
          <div class="flex flex-col md:flex-row items-end justify-between mb-12 gap-6">
            <div class="space-y-3">
              <div class="flex items-center gap-2">
                <span class="w-8 h-[1px] bg-[#15803d]"></span>
                <h3 class="text-[10px] font-black text-[#15803d] uppercase tracking-[0.4em]">Operational Excellence</h3>
              </div>
              <h2 class="text-4xl lg:text-6xl font-black uppercase tracking-tighter text-[#052c17]">Dokumentasi Lahan.</h2>
              <p class="text-slate-600 font-bold text-sm md:text-lg">Transparansi proses dari sortasi hingga pengiriman akhir.</p>
            </div>
          </div>
          <VisualGallery />
        </div>
      </section>

      <section class="reveal-up">
        <CashFlow />
        <EconomicImpact />
      </section>

      <section class="py-20 md:py-32 bg-[#fcfdfc] border-t-2 border-green-100">
        <div class="max-w-[1800px] mx-auto px-6">
          <div class="flex flex-col md:flex-row md:items-end justify-between mb-16 gap-8 reveal-up">
            <div class="space-y-4 text-left">
              <div class="flex items-center gap-3">
                 <div class="w-10 h-[2px] bg-[#15803d]"></div>
                 <h3 class="text-[10px] font-black text-[#15803d] uppercase tracking-[0.5em]">Logistik & Jangkauan</h3>
              </div>
              <h2 class="text-4xl lg:text-7xl font-black uppercase tracking-tighter text-[#052c17]">Wilayah <span class="text-green-600">Pengiriman.</span></h2>
            </div>
            <p class="max-w-md text-slate-600 font-bold leading-relaxed border-l-4 border-green-500/20 pl-6 text-left">
              Sistem distribusi mandiri CV Green Fresh Cipanas melayani berbagai kawasan bisnis strategis setiap hari dengan armada standar pangan[cite: 143, 199].
            </p>
          </div>

          <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 md:gap-6 reveal-up">
            {jabodetabekCities.slice(0, 18).map((city) => (
              <a 
                href={`/kota/${city.slug}`} 
                class="relative group overflow-hidden p-6 rounded-2xl border-2 border-green-100 bg-white shadow-sm transition-all duration-300 hover:border-[#15803d] hover:shadow-md text-left"
              >
                <div class="absolute -right-2 -top-2 w-12 h-12 bg-green-50 rounded-full opacity-50 group-hover:bg-green-100 transition-colors"></div>
                
                <div class="relative z-10 flex flex-col items-start gap-4">
                  <div class="p-2.5 bg-green-50 rounded-xl text-[#15803d] border border-green-100 group-hover:bg-[#15803d] group-hover:text-white transition-all">
                    <MapPin size={18} />
                  </div>
                  <div>
                    <span class="text-[11px] font-black uppercase tracking-widest text-[#052c17] block mb-1">
                      {city.name}
                    </span>
                    <div class="flex items-center gap-1 text-[#15803d] text-[8px] font-black uppercase opacity-60 group-hover:opacity-100 transition-opacity">
                      <span>Lihat Detail</span>
                      <ChevronRight size={10} />
                    </div>
                  </div>
                </div>
              </a>
            ))}
          </div>
        </div>
      </section>
    </main>

    <Footer />
  </div>
</MainLayout>

<style>
  /* 1. STATE AWAL: Tampil default (Anti-Blank Putih) */
  .reveal-up {
    opacity: 1;
    transform: translateY(0);
    transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
  }

  /* 2. STATE ANIMASI: Sembunyikan hanya jika JS Aktif */
  @media (prefers-reduced-motion: no-preference) {
    :global(.js-enabled) .reveal-up {
      opacity: 0;
      transform: translateY(30px);
    }
  }

  /* 3. STATE AKTIF SAAT SCROLL */
  :global(.is-visible) .reveal-up {
    opacity: 1 !important;
    transform: translateY(0) !important;
  }
</style>

<script>
  // Aktifkan mode JS untuk animasi CSS
  document.documentElement.classList.add('js-enabled');

  const setupObserver = () => {
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.classList.add('is-visible');
        }
      });
    }, { 
      threshold: 0.1,
      rootMargin: '0px 0px -50px 0px'
    });

    document.querySelectorAll('.reveal-up').forEach(el => observer.observe(el));
  };

  setupObserver();
  // Mendukung Astro View Transitions
  document.addEventListener('astro:after-swap', setupObserver);
</script>